<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <meta name="description" content="Pengaturan Smart Locker">
    <meta name="theme-color" content="#1E3C72">
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="stylesheet" href="theme.css">
    <link rel="stylesheet" href="settings.css">
    <link rel="stylesheet" href="shared-optimizations.css?v=1.0">
    <title>Smart Locker - Pengaturan</title>
</head>

<body>
    <!-- Animated Background -->
    <div class="particles-bg">
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
    </div>

    <div class="page-container">
        <!-- Header -->
        <header class="page-header">
            <button class="back-btn" onclick="window.location.href='dashboard.html'">
                <i class="fas fa-arrow-left"></i>
            </button>
            <h1 class="page-title">
                <i class="fas fa-cog"></i>
                Pengaturan
            </h1>
        </header>

        <!-- Notifications Settings -->
        <div class="settings-section">
            <div class="section-header">
                <h2><i class="fas fa-bell"></i> Notifikasi</h2>
            </div>
            <div class="settings-list">
                <div class="setting-item">
                    <div class="setting-info">
                        <div class="setting-icon green">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="setting-text">
                            <h4>Pengingat Waktu</h4>
                            <p>Ingatkan saat loker hampir habis waktu</p>
                        </div>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" id="timeReminder" checked>
                        <span class="slider"></span>
                    </label>
                </div>
            </div>
        </div>

        <!-- Appearance Settings -->
        <div class="settings-section">
            <div class="section-header">
                <h2><i class="fas fa-palette"></i> Tampilan</h2>
            </div>
            <div class="settings-list">
                <div class="setting-item">
                    <div class="setting-info">
                        <div class="setting-icon dark">
                            <i class="fas fa-moon"></i>
                        </div>
                        <div class="setting-text">
                            <h4>Mode Gelap</h4>
                            <p>Gunakan tema gelap</p>
                        </div>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" id="darkMode"
                            onchange="ThemeManager.setTheme(this.checked ? 'dark' : 'light')">
                        <span class="slider"></span>
                    </label>
                </div>


            </div>
        </div>

        <!-- Security Settings -->
        <div class="settings-section">
            <div class="section-header">
                <h2><i class="fas fa-shield-alt"></i> Keamanan</h2>
            </div>
            <div class="settings-list">
                <div class="setting-item clickable" onclick="window.location.href='forgot-password.html'">
                    <div class="setting-info">
                        <div class="setting-icon red">
                            <i class="fas fa-key"></i>
                        </div>
                        <div class="setting-text">
                            <h4>Ganti Password</h4>
                            <p>Ubah password akun Anda</p>
                        </div>
                    </div>
                    <i class="fas fa-chevron-right arrow"></i>
                </div>

                <div class="setting-item clickable" onclick="window.location.href='card-sync.html'">
                    <div class="setting-info">
                        <div class="setting-icon blue">
                            <i class="fas fa-id-card"></i>
                        </div>
                        <div class="setting-text">
                            <h4>Kelola Kartu RFID</h4>
                            <p>Sinkron atau reset kartu</p>
                        </div>
                    </div>
                    <i class="fas fa-chevron-right arrow"></i>
                </div>
            </div>
        </div>

        <!-- About Section -->
        <div class="settings-section">
            <div class="section-header">
                <h2><i class="fas fa-info-circle"></i> Tentang</h2>
            </div>
            <div class="settings-list">
                <div class="setting-item clickable" onclick="window.location.href='help.html'">
                    <div class="setting-info">
                        <div class="setting-icon green">
                            <i class="fas fa-question-circle"></i>
                        </div>
                        <div class="setting-text">
                            <h4>Bantuan & FAQ</h4>
                            <p>Pusat bantuan dan pertanyaan</p>
                        </div>
                    </div>
                    <i class="fas fa-chevron-right arrow"></i>
                </div>

                <div class="setting-item">
                    <div class="setting-info">
                        <div class="setting-icon purple">
                            <i class="fas fa-code-branch"></i>
                        </div>
                        <div class="setting-text">
                            <h4>Versi Aplikasi</h4>
                            <p>v1.0.0</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Logout Button -->
        <button class="logout-btn" onclick="logout()">
            <i class="fas fa-sign-out-alt"></i>
            Keluar dari Akun
        </button>
    </div>



    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <script>
        // Load saved settings
        document.addEventListener('DOMContentLoaded', function () {
            const settings = JSON.parse(localStorage.getItem('settings') || '{}');

            if (settings.timeReminder !== undefined) document.getElementById('timeReminder').checked = settings.timeReminder;

            // Sync darkMode toggle with actual theme
            const isDark = document.documentElement.getAttribute('data-theme') === 'dark';
            document.getElementById('darkMode').checked = isDark;
        });

        // Save settings on change
        document.querySelectorAll('input[type="checkbox"]').forEach(input => {
            input.addEventListener('change', saveSettings);
        });

        function saveSettings() {
            const settings = {
                timeReminder: document.getElementById('timeReminder').checked,
                darkMode: document.getElementById('darkMode').checked
            };
            localStorage.setItem('settings', JSON.stringify(settings));
            showToast('Pengaturan disimpan', 'success');
        }

        function logout() {
            sessionStorage.removeItem('user');
            localStorage.removeItem('user');
            localStorage.removeItem('userActiveLocker');
            window.location.href = 'index.html';
        }

        function showToast(message, type = 'info') {
            const container = document.getElementById('toastContainer');
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.innerHTML = `<i class="fas ${type === 'success' ? 'fa-check-circle' : 'fa-info-circle'}"></i><span>${message}</span>`;
            container.appendChild(toast);
            setTimeout(() => toast.remove(), 3000);
        }
    </script>
    <script src="theme.js"></script>
</body>

</html>